# Issue 1634 Spec

Status: Implemented

Issue: `#1634`  
Milestone: `#21`  
Parent: `#1613`

## Problem Statement

Tool-split parity and performance subtask scripts exist (`#1751`, `#1752`), but the parent task lacks a single deterministic artifact that combines behavior parity and latency smoke into one pass/warn/fail decision for release evidence.

## Scope

In scope:

- add a combined M21 tool-split validation runner that executes parity + performance checks
- emit deterministic machine-readable + markdown evidence artifacts
- provide tests-first harness for the combined runner using fixtures
- run issue-scope verification (combined harness + targeted quality checks)

Out of scope:

- additional tool runtime refactors
- CI workflow changes
- benchmark framework replacement

## Acceptance Criteria

AC-1 (combined validation runner):
Given existing parity/perf scripts,
when combined validation runs,
then it executes both and computes a deterministic overall status (`pass|warn|fail`).

AC-2 (artifact publication):
Given combined validation run,
when complete,
then JSON + markdown artifacts are written under `tasks/reports/` with parity/perf metrics and decision reasons.

AC-3 (regression guard):
Given fixture-driven tests,
when parity fails or perf exceeds thresholds,
then combined status reflects fail/warn semantics deterministically.

AC-4 (verification):
Given issue-scope commands,
when run,
then combined runner test harness and quality checks pass.

## Conformance Cases

| Case | Maps To | Tier | Given / When / Then |
| --- | --- | --- | --- |
| C-01 | AC-1 | Functional | Given pass fixtures, when combined runner executes, then overall status is `pass` and both checks are represented. |
| C-02 | AC-2 | Functional | Given combined run, when outputs are parsed, then JSON/markdown include parity and performance sections with decision reasons. |
| C-03 | AC-3 | Regression | Given warn/fail fixtures, when combined runner executes, then warn/fail statuses and exit codes are deterministic. |
| C-04 | AC-4 | Integration | Given issue-scope verification commands, when executed, then combined harness and quality checks pass. |

## Success Metrics

- parent-task evidence for tool split is generated by one deterministic command
- parity regressions and performance drift status are visible in a single artifact
